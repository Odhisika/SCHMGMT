{% extends 'base.html' %}
{% load i18n %}
{% block title %}{{ title }} | {% trans 'Learning management system' %}{% endblock title %}

{% block content %}

<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">{% trans 'Home' %}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{% trans 'Timetable' %}</li>
    </ol>
</nav>

<div class="title-1"><i class="fas fa-calendar-alt"></i> {% trans 'Timetable Dashboard' %}</div>
<br>

{% include 'snippets/messages.html' %}

{% if current_term %}
<div class="alert alert-info">
    <i class="fas fa-info-circle"></i> 
    {% trans 'Current Term' %}: <strong>{{ current_term }}</strong>
</div>
{% else %}
<div class="alert alert-warning">
    <i class="fas fa-exclamation-triangle"></i> 
    {% trans 'No active term found. Please set a current term first.' %}
</div>
{% endif %}

<div class="row mt-4">
    {% if request.user.is_superuser or request.user.is_school_admin %}
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <i class="fas fa-cog"></i> {% trans 'Management' %}
            </div>
            <div class="card-body">
                <a href="{% url 'timetable:period_list' %}" class="btn btn-outline-primary btn-block mb-2 w-100">
                    <i class="fas fa-clock"></i> {% trans 'Manage Periods' %}
                </a>
                <a href="{% url 'timetable:timetable_generate' %}" class="btn btn-outline-success btn-block w-100">
                    <i class="fas fa-magic"></i> {% trans 'Auto-Generate Timetable' %}
                </a>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="{% if request.user.is_superuser or request.user.is_school_admin %}col-md-8{% else %}col-md-12{% endif %}">
        <div class="card">
            <div class="card-header bg-success text-white">
                <i class="fas fa-table"></i> {% trans 'View Timetables' %}
            </div>
            <div class="card-body">
                <h5>{% trans 'Primary School' %}</h5>
                <div class="row mb-3">
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='Primary 1' %}" class="btn btn-outline-primary w-100">
                            {% trans 'Primary 1' %}
                        </a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='Primary 2' %}" class="btn btn-outline-primary w-100">
                            {% trans 'Primary 2' %}
                        </a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='Primary 3' %}" class="btn btn-outline-primary w-100">
                            {% trans 'Primary 3' %}
                        </a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='Primary 4' %}" class="btn btn-outline-primary w-100">
                            {% trans 'Primary 4' %}
                        </a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='Primary 5' %}" class="btn btn-outline-primary w-100">
                            {% trans 'Primary 5' %}
                        </a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='Primary 6' %}" class="btn btn-outline-primary w-100">
                            {% trans 'Primary 6' %}
                        </a>
                    </div>
                </div>

                <h5>{% trans 'Junior High School' %}</h5>
                <div class="row">
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='JHS 1' %}" class="btn btn-outline-success w-100">
                            {% trans 'JHS 1' %}
                        </a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='JHS 2' %}" class="btn btn-outline-success w-100">
                            {% trans 'JHS 2' %}
                        </a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="{% url 'timetable:timetable_by_class' level='JHS 3' %}" class="btn btn-outline-success w-100">
                            {% trans 'JHS 3' %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
