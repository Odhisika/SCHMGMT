{% extends 'base.html' %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block js %}
<script>
    function filterPeriodsByLevel(level) {
        // Implement AJAX or simpler filtering logic
        // Since we are server-side filtering on load, a reload might be simplest for now
        // OR fetch compatible periods/subjects
        
        const url = new URL(window.location.href);
        url.searchParams.set('level', level);
        window.location.href = url.toString();
    }
</script>
{% endblock js %}
{% block title %}{{ title }} | {% trans 'Learning management system' %}{% endblock title %}

{% block content %}

<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">{% trans 'Home' %}</a></li>
        <li class="breadcrumb-item"><a href="{% url 'timetable:timetable_dashboard' %}">{% trans 'Timetable' %}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ title }}</li>
    </ol>
</nav>

{% include 'snippets/messages.html' %}

<div class="row">
    <div class="col-md-6 mx-auto">
        <div class="card">
            <p class="form-title">{{ title }}</p>
            <div class="p-3">
                <form method="POST">
                    {% csrf_token %}
                    {{ form|crispy }}
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> {% trans 'Save Entry' %}
                    </button>
                    <a href="{% url 'timetable:timetable_dashboard' %}" class="btn btn-secondary">
                        <i class="fas fa-times"></i> {% trans 'Cancel' %}
                    </a>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}
