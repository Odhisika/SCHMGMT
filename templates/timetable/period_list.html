{% extends 'base.html' %}
{% load i18n %}
{% block title %}{{ title }} | {% trans 'Learning management system' %}{% endblock title %}

{% block content %}

<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">{% trans 'Home' %}</a></li>
        <li class="breadcrumb-item"><a href="{% url 'timetable:timetable_dashboard' %}">{% trans 'Timetable' %}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{% trans 'Periods' %}</li>
    </ol>
</nav>

<div class="manage-wrap">
    <a class="btn btn-primary" href="{% url 'timetable:period_add' %}">
        <i class="fas fa-plus"></i> {% trans 'Add Period' %}
    </a>
</div>

<div class="title-1"><i class="fas fa-clock"></i> {% trans 'Period Management' %}</div>
<br>

{% include 'snippets/messages.html' %}

<div class="table-responsive table-shadow p-0 mt-4">
    <table class="table table-light table-striped">
        <thead>
            <tr>
                <th>#</th>
                <th>{% trans 'Order' %}</th>
                <th>{% trans 'Division' %}</th>
                <th>{% trans 'Name' %}</th>
                <th>{% trans 'Type' %}</th>
                <th>{% trans 'Start Time' %}</th>
                <th>{% trans 'End Time' %}</th>
                <th>{% trans 'Actions' %}</th>
            </tr>
        </thead>
        <tbody>
            {% for period in periods %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ period.order }}</td>
                <td>
                    {% if period.division %}
                        <span class="badge bg-secondary">{{ period.get_division_display }}</span>
                    {% else %}
                        <span class="badge bg-light text-dark">{% trans 'Global' %}</span>
                    {% endif %}
                </td>
                <td>{{ period.name }}</td>
                <td>
                    <span class="badge {% if period.period_type == 'LESSON' %}bg-primary{% elif period.period_type == 'BREAK' %}bg-warning{% else %}bg-info{% endif %}">
                        {{ period.get_period_type_display }}
                    </span>
                </td>
                <td>{{ period.start_time|time:"H:i" }}</td>
                <td>{{ period.end_time|time:"H:i" }}</td>
                <td>
                    <div class="update-delete">
                        <a href="{% url 'timetable:period_edit' pk=period.pk %}" class="update" title="{% trans 'Edit' %}">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="{% url 'timetable:period_delete' pk=period.pk %}" class="delete" title="{% trans 'Delete' %}">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-center text-danger">
                    {% trans 'No periods defined yet.' %}
                    <a href="{% url 'timetable:period_add' %}">{% trans 'Add one now' %}</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
